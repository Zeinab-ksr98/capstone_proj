<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home</title>

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Include Bootstrap JavaScript and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" th:href="@{css/test.css}">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</head>
<body style="background: silver">
<div class="d-flex">
    <div th:replace="fragments/Adimnheader :: header"></div>
    <div class="container ml-5 mt-5">

        <div class=" row row-cols-1 row-cols-md-2 row-cols-xl-5 ">
            <div class="col mt-3">
                <div class="card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Top Hospital</p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class="card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Top Ambulance </p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class="card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Total Reservations </p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class=" ml-2 card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Total Users</p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class=" ml-2 card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Total Agencies</p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class=" mt-4">

            <div class=" row row-cols-1 row-cols-md-2 row-cols-xl-3 mt-3">
                <div class="col"
                     th:if="${(requestedaccounts != null and not #lists.isEmpty(requestedaccounts)) or (requestedcategories != null and not #lists.isEmpty(requestedcategories))}">
                    <div aria-atomic="true" aria-live="assertive" class="toast" data-autohide="false" id="notification"
                         role="alert">
                        <div class="toast-header">
                            <strong class="mr-auto">New Requests</strong>
                            <button aria-label="Close" class="ml-5 mb-1 close" data-dismiss="toast" type="button">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="toast-body">
                            <table class="table table-light">
                                <tbody>
                                <tr th:each="account : ${requestedaccounts}">
                                    <td th:text="${account.type}"></td>
                                    <td th:text="${account.publicName}"></td>
                                    <td th:text="${account.getCompanyName()}"></td>
                                    <td th:text="${account.email}"></td>
                                    <td th:text="${account.region}"></td>
                                    <td th:text="${account.phone}"></td>

                                    <td>
                                        <button class="btn btn-danger"
                                                th:href="@{/delete-AccountRequest/{ID}(ID=${account.id})}">
                                            delete
                                        </button>
                                    </td>
                                </tr>
                                <!-- End iteration -->
                                </tbody>

                            </table>
                            <table class="table table-light "
                                   th:if="${requestedcategories != null and not #lists.isEmpty(requestedcategories)}">
                                <tbody>
                                <tr th:each="cat : ${requestedcategories} ">
                                    <td th:text="${cat.RequestedCategory}"></td>
                                    <td>
                                        <a th:href="@{/delete-CategoryRequest/{ID}(ID=${cat.id})}">
                                            <svg height="20" viewBox="0 0 48 48" width="20" x="0px"
                                                 xmlns="http://www.w3.org/2000/svg"
                                                 y="0px">
                                                <linearGradient gradientUnits="userSpaceOnUse"
                                                                id="hbE9Evnj3wAjjA2RX0We2a_OZuepOQd0omj_gr1" x1="7.534"
                                                                x2="27.557" y1="7.534" y2="27.557">
                                                    <stop offset="0" stop-color="#f44f5a"></stop>
                                                    <stop offset=".443" stop-color="#ee3d4a"></stop>
                                                    <stop offset="1" stop-color="#e52030"></stop>
                                                </linearGradient>
                                                <path d="M42.42,12.401c0.774-0.774,0.774-2.028,0-2.802L38.401,5.58c-0.774-0.774-2.028-0.774-2.802,0	L24,17.179L12.401,5.58c-0.774-0.774-2.028-0.774-2.802,0L5.58,9.599c-0.774,0.774-0.774,2.028,0,2.802L17.179,24L5.58,35.599	c-0.774,0.774-0.774,2.028,0,2.802l4.019,4.019c0.774,0.774,2.028,0.774,2.802,0L42.42,12.401z"
                                                      fill="url(#hbE9Evnj3wAjjA2RX0We2a_OZuepOQd0omj_gr1)"></path>
                                                <linearGradient gradientUnits="userSpaceOnUse"
                                                                id="hbE9Evnj3wAjjA2RX0We2b_OZuepOQd0omj_gr2" x1="27.373"
                                                                x2="40.507" y1="27.373" y2="40.507">
                                                    <stop offset="0" stop-color="#a8142e"></stop>
                                                    <stop offset=".179" stop-color="#ba1632"></stop>
                                                    <stop offset=".243" stop-color="#c21734"></stop>
                                                </linearGradient>
                                                <path d="M24,30.821L35.599,42.42c0.774,0.774,2.028,0.774,2.802,0l4.019-4.019	c0.774-0.774,0.774-2.028,0-2.802L30.821,24L24,30.821z"
                                                      fill="url(#hbE9Evnj3wAjjA2RX0We2b_OZuepOQd0omj_gr2)"></path>
                                            </svg>
                                        </a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>


                    <!-- End Notification container -->

                    <!-- JavaScript to show the notification when the page loads -->
                    <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            var toastElement = document.getElementById('notification');
                            var toast = new bootstrap.Toast(toastElement);
                            toast.show();
                        });
                    </script>
                </div>

                <div class="col ">
                    <div class="card radius-10 border-start border-0 border-3 border-info">

                        <canvas height="400" id="roleChart" width="400"></canvas>
                    </div>
                </div>
                <div class="col ">
                    <div class="card radius-10 border-start border-0 border-3 border-info">

                        <canvas height="400" id="feedbackChart" width="400"></canvas>
                    </div>
                </div>

                <!--                        <div class="card radius-10 border-start border-0 border-3 border-info " style="min-height: 320px" th:if="${(requestedaccounts != null and not #lists.isEmpty(requestedaccounts)) or (requestedcategories != null and not #lists.isEmpty(requestedcategories))}">-->
                <!--                            <h6 >New Requests</h6>-->
                <!--                            <table class="table table-light p-3 " th:if="${requestedaccounts != null and not #lists.isEmpty(requestedaccounts)}">-->
                <!--                                <p> account requests</p>-->
                <!--                                <tbody>-->
                <!--                                <tr th:each="account : ${requestedaccounts} ">-->
                <!--                                    <td th:text="${account.type}"></td>-->
                <!--                                    <td th:text="${account.publicName}"></td>-->
                <!--                                    <td th:text="${account.email}"></td>-->
                <!--                                    <td>-->
                <!--                                        <a th:href="@{/delete-AccountRequest/{ID}(ID=${account.id})}">-->
                <!--                                            <img width="32" height="32" src="https://img.icons8.com/puffy/32/FA5252/delete-forever.png" alt="delete-forever"/>-->
                <!--                                        </a>-->
                <!--                                    </td>-->
                <!--                                </tr>-->
                <!--                                </tbody>-->
                <!--                            </table >-->
                <!--                            <p> category requests</p>-->
                <!--                            <table class="table table-light " th:if="${requestedcategories != null and not #lists.isEmpty(requestedcategories)}">-->
                <!--                                <tbody>-->
                <!--                                <tr th:each="cat : ${requestedcategories} ">-->
                <!--                                    <td th:text="${cat.RequestedCategory}"></td>-->
                <!--                                    <td>-->
                <!--                                        <a th:href="@{/delete-CategoryRequest/{ID}(ID=${cat.id})}">-->
                <!--                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48">-->
                <!--                                                <linearGradient id="hbE9Evnj3wAjjA2RX0We2a_OZuepOQd0omj_gr1" x1="7.534" x2="27.557" y1="7.534" y2="27.557" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f44f5a"></stop><stop offset=".443" stop-color="#ee3d4a"></stop><stop offset="1" stop-color="#e52030"></stop></linearGradient><path fill="url(#hbE9Evnj3wAjjA2RX0We2a_OZuepOQd0omj_gr1)" d="M42.42,12.401c0.774-0.774,0.774-2.028,0-2.802L38.401,5.58c-0.774-0.774-2.028-0.774-2.802,0	L24,17.179L12.401,5.58c-0.774-0.774-2.028-0.774-2.802,0L5.58,9.599c-0.774,0.774-0.774,2.028,0,2.802L17.179,24L5.58,35.599	c-0.774,0.774-0.774,2.028,0,2.802l4.019,4.019c0.774,0.774,2.028,0.774,2.802,0L42.42,12.401z"></path><linearGradient id="hbE9Evnj3wAjjA2RX0We2b_OZuepOQd0omj_gr2" x1="27.373" x2="40.507" y1="27.373" y2="40.507" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#a8142e"></stop><stop offset=".179" stop-color="#ba1632"></stop><stop offset=".243" stop-color="#c21734"></stop></linearGradient><path fill="url(#hbE9Evnj3wAjjA2RX0We2b_OZuepOQd0omj_gr2)" d="M24,30.821L35.599,42.42c0.774,0.774,2.028,0.774,2.802,0l4.019-4.019	c0.774-0.774,0.774-2.028,0-2.802L30.821,24L24,30.821z"></path>-->
                <!--                                            </svg>                                        </a>-->
                <!--                                    </td>-->
                <!--                                </tr>-->
                <!--                                </tbody>-->
                <!--                            </table>-->

                <!--                        </div>-->
            </div>

        </div>
    </div>

</div>

<script th:inline="javascript">
    $(document).ready(function () {
        var ctx = document.getElementById('roleChart').getContext('2d');
        var rolePercentage = /*[[${rolePercentage}]]*/ {};

        var labels = [];
        var data = [];
        var backgroundColors = [];

        // Define bluish colors
        var bluishColors = ['#007bff', '#0056b3', '#83a6bb', '#151546'];

        for (var role in rolePercentage) {
            labels.push(role);
            data.push(rolePercentage[role]);
            // Use bluish colors instead of random colors
            backgroundColors.push(bluishColors.pop());
        }

        var chartData = {
            labels: labels,
            datasets: [{
                data: data,
                backgroundColor: backgroundColors
            }]
        };

        var options = {
            responsive: true,
            maintainAspectRatio: false
        };

        var myDoughnutChart = new Chart(ctx, {
            type: 'doughnut',
            data: chartData,
            options: options
        });
    });
</script>
<script th:inline="javascript">
    $(document).ready(function () {
        var ctxFeedback = document.getElementById('feedbackChart').getContext('2d');
        var feedbackCounts = /*[[${feedbackCount}]]*/ {};
        var labelsFeedback = Object.keys(feedbackCounts);
        var dataFeedback = Object.values(feedbackCounts);

        // Define different colors for each segment
        var colors = ['#007bff', 'silver', '#151546', '#dc3545', '#6c757d']; // Add more colors as needed

        var feedbackChartData = {
            labels: labelsFeedback,
            datasets: [{
                data: dataFeedback,
                backgroundColor: colors
            }]
        };
        var feedbackOptions = {
            responsive: true,
            maintainAspectRatio: false
        };
        var myPolarAreaChart = new Chart(ctxFeedback, {
            type: 'polarArea',
            data: feedbackChartData,
            options: feedbackOptions
        });
    });
</script>
</body>

</html>
