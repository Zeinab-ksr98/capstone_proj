<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home</title>

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Include Bootstrap JavaScript and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" th:href="@{css/test.css}">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</head>
<body style="background: silver">
<div class="container-fluid">

<div class="d-flex">
    <div th:replace="fragments/Adimnheader :: header"></div>
    <div class="container ml-5 mt-5">

        <div class=" row row-cols-1 row-cols-md-2 row-cols-xl-4 ">
            <div class="col mt-3">
                <div class="card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Hospitals Reservations</p>
                                <h5 class="my-1 text-info" th:text="${analytics.get(0)}"></h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class="card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Ambulance Reservations </p>
                                <h5 class="my-1 text-info" th:text="${analytics.get(1)}"></h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class="card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Total Reservations </p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3">
                <div class=" ml-2 card radius-10 border-start border-0 border-3 border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div>
                                <p class="mb-0 text-secondary">Total Agencies</p>
                                <h5 class="my-1 text-info">sfd</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class=" row row-cols-1 row-cols-md-1 row-cols-xl-1 mt-3">

            <div class="col"
                 th:if="${(requestedaccounts != null and not #lists.isEmpty(requestedaccounts)) or (requestedcategories != null and not #lists.isEmpty(requestedcategories))}">
<!--                <div aria-atomic="true" aria-live="assertive" class="toast" data-autohide="false" id="notification"-->
<!--                     role="alert">-->
<!--                    <div class="toast-header">-->
<!--                        <strong class="mr-auto">New Requests</strong>-->
<!--                        <button aria-label="Close" class="ml-5 mb-1 close" data-dismiss="toast" type="button">-->
<!--                            <span aria-hidden="true">&times;</span>-->
<!--                        </button>-->
<!--                    </div>-->
                    <div class="toast-body">
                        <table class="table table-light">
                            <tbody>
                            <tr th:each="account : ${requestedaccounts}">
                                <td th:text="${account.type}"></td>
                                <td th:text="${account.publicName}"></td>
                                <td th:text="${account.getCompanyName()}"></td>
                                <td th:text="${account.email}"></td>
                                <td th:text="${account.region}"></td>
                                <td th:text="${account.location}"></td>

                                <td th:text="${account.phone}"></td>

                                <td>
                                    <button class="btn "
                                            th:href="@{/delete-AccountRequest/{ID}(ID=${account.id})}">
                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 32 32">
                                            <linearGradient id="ONeHyQPNLkwGmj04dE6Soa_2Tv2g4T4Wtu0_gr1" x1="16" x2="16" y1="2.888" y2="29.012" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#36eb69"></stop><stop offset="1" stop-color="#1bbd49"></stop></linearGradient><circle cx="16" cy="16" r="13" fill="url(#ONeHyQPNLkwGmj04dE6Soa_2Tv2g4T4Wtu0_gr1)"></circle><linearGradient id="ONeHyQPNLkwGmj04dE6Sob_2Tv2g4T4Wtu0_gr2" x1="16" x2="16" y1="3" y2="29" gradientUnits="userSpaceOnUse"><stop offset="0" stop-opacity=".02"></stop><stop offset="1" stop-opacity=".15"></stop></linearGradient><path fill="url(#ONeHyQPNLkwGmj04dE6Sob_2Tv2g4T4Wtu0_gr2)" d="M16,3.25c7.03,0,12.75,5.72,12.75,12.75 S23.03,28.75,16,28.75S3.25,23.03,3.25,16S8.97,3.25,16,3.25 M16,3C8.82,3,3,8.82,3,16s5.82,13,13,13s13-5.82,13-13S23.18,3,16,3 L16,3z"></path><g opacity=".2"><linearGradient id="ONeHyQPNLkwGmj04dE6Soc_2Tv2g4T4Wtu0_gr3" x1="16.502" x2="16.502" y1="11.26" y2="20.743" gradientUnits="userSpaceOnUse"><stop offset="0" stop-opacity=".1"></stop><stop offset="1" stop-opacity=".7"></stop></linearGradient><path fill="url(#ONeHyQPNLkwGmj04dE6Soc_2Tv2g4T4Wtu0_gr3)" d="M21.929,11.26 c-0.35,0-0.679,0.136-0.927,0.384L15,17.646l-2.998-2.998c-0.248-0.248-0.577-0.384-0.927-0.384c-0.35,0-0.679,0.136-0.927,0.384 c-0.248,0.248-0.384,0.577-0.384,0.927c0,0.35,0.136,0.679,0.384,0.927l3.809,3.809c0.279,0.279,0.649,0.432,1.043,0.432 c0.394,0,0.764-0.153,1.043-0.432l6.813-6.813c0.248-0.248,0.384-0.577,0.384-0.927c0-0.35-0.136-0.679-0.384-0.927 C22.608,11.396,22.279,11.26,21.929,11.26L21.929,11.26z"></path></g><path fill="#fff" d="M10.325,14.825L10.325,14.825c0.414-0.414,1.086-0.414,1.5,0L15,18l6.179-6.179	c0.414-0.414,1.086-0.414,1.5,0l0,0c0.414,0.414,0.414,1.086,0,1.5l-6.813,6.813c-0.478,0.478-1.254,0.478-1.732,0l-3.809-3.809	C9.911,15.911,9.911,15.239,10.325,14.825z"></path>
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                            <!-- End iteration -->
                            </tbody>

                        </table>
                        <table class="table table-light "
                               th:if="${requestedcategories != null and not #lists.isEmpty(requestedcategories)}">

                            <tbody>
                            <tr th:each="cat : ${requestedcategories} ">
                                <td th:text="${cat.getRequestedCategory()}"></td>
                                <td>
                                    <button class="btn "
                                            th:href="@{/delete-CategoryRequest/{ID}(ID=${cat.id})}">
                                        <svg  xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 32 32">
                                            <linearGradient id="ONeHyQPNLkwGmj04dE6Soa_2Tv2g4T4Wtu0_gr1" x1="16" x2="16" y1="2.888" y2="29.012" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#36eb69"></stop><stop offset="1" stop-color="#1bbd49"></stop></linearGradient><circle cx="16" cy="16" r="13" fill="url(#ONeHyQPNLkwGmj04dE6Soa_2Tv2g4T4Wtu0_gr1)"></circle><linearGradient id="ONeHyQPNLkwGmj04dE6Sob_2Tv2g4T4Wtu0_gr2" x1="16" x2="16" y1="3" y2="29" gradientUnits="userSpaceOnUse"><stop offset="0" stop-opacity=".02"></stop><stop offset="1" stop-opacity=".15"></stop></linearGradient><path fill="url(#ONeHyQPNLkwGmj04dE6Sob_2Tv2g4T4Wtu0_gr2)" d="M16,3.25c7.03,0,12.75,5.72,12.75,12.75 S23.03,28.75,16,28.75S3.25,23.03,3.25,16S8.97,3.25,16,3.25 M16,3C8.82,3,3,8.82,3,16s5.82,13,13,13s13-5.82,13-13S23.18,3,16,3 L16,3z"></path><g opacity=".2"><linearGradient id="ONeHyQPNLkwGmj04dE6Soc_2Tv2g4T4Wtu0_gr3" x1="16.502" x2="16.502" y1="11.26" y2="20.743" gradientUnits="userSpaceOnUse"><stop offset="0" stop-opacity=".1"></stop><stop offset="1" stop-opacity=".7"></stop></linearGradient><path fill="url(#ONeHyQPNLkwGmj04dE6Soc_2Tv2g4T4Wtu0_gr3)" d="M21.929,11.26 c-0.35,0-0.679,0.136-0.927,0.384L15,17.646l-2.998-2.998c-0.248-0.248-0.577-0.384-0.927-0.384c-0.35,0-0.679,0.136-0.927,0.384 c-0.248,0.248-0.384,0.577-0.384,0.927c0,0.35,0.136,0.679,0.384,0.927l3.809,3.809c0.279,0.279,0.649,0.432,1.043,0.432 c0.394,0,0.764-0.153,1.043-0.432l6.813-6.813c0.248-0.248,0.384-0.577,0.384-0.927c0-0.35-0.136-0.679-0.384-0.927 C22.608,11.396,22.279,11.26,21.929,11.26L21.929,11.26z"></path></g><path fill="#fff" d="M10.325,14.825L10.325,14.825c0.414-0.414,1.086-0.414,1.5,0L15,18l6.179-6.179	c0.414-0.414,1.086-0.414,1.5,0l0,0c0.414,0.414,0.414,1.086,0,1.5l-6.813,6.813c-0.478,0.478-1.254,0.478-1.732,0l-3.809-3.809	C9.911,15.911,9.911,15.239,10.325,14.825z"></path>
                                        </svg>
                                    </button>

                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


                <!-- End Notification container -->

                <!-- JavaScript to show the notification when the page loads -->
<!--                <script>-->
<!--                    document.addEventListener('DOMContentLoaded', function () {-->
<!--                        var toastElement = document.getElementById('notification');-->
<!--                        var toast = new bootstrap.Toast(toastElement);-->
<!--                        toast.show();-->
<!--                    });-->
<!--                </script>-->
<!--            </div>-->
        </div>
            <div class=" row row-cols-1 row-cols-md-2 row-cols-xl-2 mt-3">

                <div class="col ">
                    <div class="card radius-10 border-start border-0 border-3 border-info">

                        <canvas height="400" id="roleChart" width="400"></canvas>
                    </div>
                </div>
                <div class="col ">
                    <div class="card radius-10 border-start border-0 border-3 border-info">

                        <canvas height="400" id="feedbackChart" width="400"></canvas>
                    </div>
                </div>

                <!--                        <div class="card radius-10 border-start border-0 border-3 border-info " style="min-height: 320px" th:if="${(requestedaccounts != null and not #lists.isEmpty(requestedaccounts)) or (requestedcategories != null and not #lists.isEmpty(requestedcategories))}">-->
                <!--                            <h6 >New Requests</h6>-->
                <!--                            <table class="table table-light p-3 " th:if="${requestedaccounts != null and not #lists.isEmpty(requestedaccounts)}">-->
                <!--                                <p> account requests</p>-->
                <!--                                <tbody>-->
                <!--                                <tr th:each="account : ${requestedaccounts} ">-->
                <!--                                    <td th:text="${account.type}"></td>-->
                <!--                                    <td th:text="${account.publicName}"></td>-->
                <!--                                    <td th:text="${account.email}"></td>-->
                <!--                                    <td>-->
                <!--                                        <a th:href="@{/delete-AccountRequest/{ID}(ID=${account.id})}">-->
                <!--                                            <img width="32" height="32" src="https://img.icons8.com/puffy/32/FA5252/delete-forever.png" alt="delete-forever"/>-->
                <!--                                        </a>-->
                <!--                                    </td>-->
                <!--                                </tr>-->
                <!--                                </tbody>-->
                <!--                            </table >-->
                <!--                            <p> category requests</p>-->
                <!--                            <table class="table table-light " th:if="${requestedcategories != null and not #lists.isEmpty(requestedcategories)}">-->
                <!--                                <tbody>-->
                <!--                                <tr th:each="cat : ${requestedcategories} ">-->
                <!--                                    <td th:text="${cat.RequestedCategory}"></td>-->
                <!--                                    <td>-->
                <!--                                        <a th:href="@{/delete-CategoryRequest/{ID}(ID=${cat.id})}">-->
                <!--                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48">-->
                <!--                                                <linearGradient id="hbE9Evnj3wAjjA2RX0We2a_OZuepOQd0omj_gr1" x1="7.534" x2="27.557" y1="7.534" y2="27.557" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f44f5a"></stop><stop offset=".443" stop-color="#ee3d4a"></stop><stop offset="1" stop-color="#e52030"></stop></linearGradient><path fill="url(#hbE9Evnj3wAjjA2RX0We2a_OZuepOQd0omj_gr1)" d="M42.42,12.401c0.774-0.774,0.774-2.028,0-2.802L38.401,5.58c-0.774-0.774-2.028-0.774-2.802,0	L24,17.179L12.401,5.58c-0.774-0.774-2.028-0.774-2.802,0L5.58,9.599c-0.774,0.774-0.774,2.028,0,2.802L17.179,24L5.58,35.599	c-0.774,0.774-0.774,2.028,0,2.802l4.019,4.019c0.774,0.774,2.028,0.774,2.802,0L42.42,12.401z"></path><linearGradient id="hbE9Evnj3wAjjA2RX0We2b_OZuepOQd0omj_gr2" x1="27.373" x2="40.507" y1="27.373" y2="40.507" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#a8142e"></stop><stop offset=".179" stop-color="#ba1632"></stop><stop offset=".243" stop-color="#c21734"></stop></linearGradient><path fill="url(#hbE9Evnj3wAjjA2RX0We2b_OZuepOQd0omj_gr2)" d="M24,30.821L35.599,42.42c0.774,0.774,2.028,0.774,2.802,0l4.019-4.019	c0.774-0.774,0.774-2.028,0-2.802L30.821,24L24,30.821z"></path>-->
                <!--                                            </svg>                                        </a>-->
                <!--                                    </td>-->
                <!--                                </tr>-->
                <!--                                </tbody>-->
                <!--                            </table>-->

                <!--                        </div>-->
            </div>

        </div>
    </div>

</div>

<script th:inline="javascript">
    $(document).ready(function () {
        var ctx = document.getElementById('roleChart').getContext('2d');
        var rolePercentage = /*[[${rolePercentage}]]*/ {};

        var labels = [];
        var data = [];
        var backgroundColors = [];

        // Define bluish colors
        var bluishColors = ['#007bff', '#0056b3', '#83a6bb', '#151546'];

        for (var role in rolePercentage) {
            labels.push(role);
            data.push(rolePercentage[role]);
            // Use bluish colors instead of random colors
            backgroundColors.push(bluishColors.pop());
        }

        var chartData = {
            labels: labels,
            datasets: [{
                data: data,
                backgroundColor: backgroundColors
            }]
        };

        var options = {
            responsive: true,
            maintainAspectRatio: false
        };

        var myDoughnutChart = new Chart(ctx, {
            type: 'doughnut',
            data: chartData,
            options: options
        });
    });
</script>
<script th:inline="javascript">
    $(document).ready(function () {
        var ctxFeedback = document.getElementById('feedbackChart').getContext('2d');
        var feedbackCounts = /*[[${feedbackCount}]]*/ {};
        var labelsFeedback = Object.keys(feedbackCounts);
        var dataFeedback = Object.values(feedbackCounts);

        // Define different colors for each segment
        var colors = ['#007bff', 'silver', '#151546', '#dc3545', '#6c757d']; // Add more colors as needed

        var feedbackChartData = {
            labels: labelsFeedback,
            datasets: [{
                data: dataFeedback,
                backgroundColor: colors
            }]
        };
        var feedbackOptions = {
            responsive: true,
            maintainAspectRatio: false
        };
        var myPolarAreaChart = new Chart(ctxFeedback, {
            type: 'polarArea',
            data: feedbackChartData,
            options: feedbackOptions
        });
    });
</script>
</body>

</html>
